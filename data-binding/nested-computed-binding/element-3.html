<link rel="import" href="../../../bower_components/polymer/polymer.html">

<dom-module id="element-3">
    <template>
        <!-- Only when getArray return different result compared with previous calls, computeFun will be invoked and the input param is the changed result. -->
        <template is="dom-repeat" items="{{getArray(test.count)}}">
            <div>{{computeFun(item)}}</div>
        </template>

        <button on-click="handleClick">Element3 Button</button>
    </template>
    <script>

    Polymer({
        is: 'element-3',
        properties: {
            test: {
                type: Object,
                notify: true,
                value: {}
            }
        },

        getArray: function(count) {
            var array;
            if (count % 3) {
                array = ['a'];
            } else {
                array = ['a', 'b', 'c']
            }
            console.log('getArray is invoked, return: ', array);
            return array;
        },

        computeFun: function(changedItem) {
            console.log('computeFun is invoked. changedItem: ', changedItem);
        },

        handleClick: function(e, detail) {
            if (this.test.count === undefined) {
                count = 0;
            } else {
                count = this.test.count + 1;
            }
            this.set('test.count', count);
        }

    });
    </script>
</dom-module>